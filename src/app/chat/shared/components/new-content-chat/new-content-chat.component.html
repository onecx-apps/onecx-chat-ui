<!-- Wrapper -->
<div class="new-content-chat-wrapper flex flex-column h-full bg-white p-3" 
     style="min-height:95vh;height:95vh;box-sizing:border-box;display:flex;flex-direction:column;position:relative;overflow:visible;">
  <!-- Chat Name Section -->
  <div class="mb-4 desktop-only">
    <label class="text-gray-500 text-sm mb-2 d-block" style="margin-bottom:6px !important;display:block;">Chat Name</label>
    <input type="text"
           class="chat-name-input w-full p-2 rounded-full"
           [value]="(chatName$ | async) || ('Group Chat ' + (today | date:'dd.MM.yyyy'))"
           (input)="chatNameChange.emit($event)"
           />
  </div>

  <!-- Recipients Section -->
  <div class="mb-4">
    <label class="text-gray-500 text-sm mb-2 d-block desktop-only" style="margin-bottom:6px !important;display:block;">Recipients</label>
    <div class="flex align-items-center mb-2" style="position:relative;">
      <input type="text"
             class="recipient-input w-full p-2 rounded-full"
             style="padding-right:2.5rem;"
             [value]="recipientInput$ | async"
             (input)="recipientInputChange.emit($event)"
             placeholder="E-Mail or Nameâ€¦" />
      @if (!hideAddButton) {
        <button type="button"
                class="add-recipient-btn"
                style="background:none;border:none;box-shadow:none;padding:0;position:absolute;right:8px;top:50%;transform:translateY(-50%);"
                (click)="addRecipient.emit()">
          <i class="pi pi-plus"></i>
        </button>
      }
    </div>
    @if (recipients$ | async; as recipients) {
      <div class="desktop-only">
        @for (recipient of recipients; track $index) {
          <div class="flex align-items-center mb-1">
            <span class="flex-grow-1">{{ recipient }}</span>
            <button type="button"
                    class="remove-recipient-btn ml-2 p-1 rounded-full bg-transparent"
                    (click)="removeRecipient.emit($index)">
              <i class="pi pi-trash"></i>
            </button>
          </div>
        }
      </div>
    }
  </div>

  <!-- Spacer -->
  <div class="flex-grow-1"></div>

  <!-- Create Button -->
  <div class="create-btn-bar" 
       style="width:auto;background:transparent;position:absolute;right:16px;bottom:16px;z-index:10;margin-top:0;display:flex;justify-content:flex-end;padding:0;">
    <div style="display:flex;justify-content:flex-end;padding:10px;">
      <button type="button"
              class="create-btn p-3 rounded-full"
              style="min-width:120px;padding-left:16px;padding-right:16px;"
              (click)="createGroup.emit()">
        Create
      </button>
    </div>
  </div>
</div>
