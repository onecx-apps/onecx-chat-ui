<form [formGroup]="chatForm" 
      (ngSubmit)="onCreate()"
      class="new-chat-wrapper flex flex-column h-full bg-white p-3" 
      style="min-height:95vh;height:95vh;box-sizing:border-box;display:flex;flex-direction:column;position:relative;overflow:visible;">

  <!-- Shared Settings (ALWAYS visible - used by all chat types) -->
  <app-shared-chat-settings
    [form]="chatForm"
  ></app-shared-chat-settings>

  <!-- Type-Specific Settings (conditional based on chat mode) -->
  @if (settingsType === 'direct') {
    <app-direct-chat-settings [form]="chatForm"></app-direct-chat-settings>
  }

  @if (settingsType === 'group') {
    <app-group-chat-settings [form]="chatForm"></app-group-chat-settings>
  }

  <!-- Spacer -->
  <div class="flex-grow-1"></div>

  <!-- Create Button -->
  <div class="create-btn-bar" 
       style="position:absolute;bottom:0;left:0;right:0;padding:12px;display:flex;justify-content:flex-end;">
    <p-button type="submit" [label]="'CHAT.ACTIONS.CREATE' | translate" [outlined]="true" [disabled]="chatForm.invalid" styleClass="black-button" />
  </div>
</form>